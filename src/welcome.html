<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./public/css/utils.css">
  <link href="https://fonts.googleapis.com/css?family=Kanit&display=swap" rel="stylesheet">
  <title>Vitalplayer</title>
</head>

<style>
  * {
    font-family: 'Kanit', sans-serif;
    text-decoration: none;
  }

  #notification {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 200px;
    padding: 20px;
    border-radius: 5px;
    background-color: white;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  }

  .hidden {
    display: none;
  }

  #more {
    display: none;
  }
</style>

<body class="colorb-dayblues">
  <div class="margin-auto width-auto marginl-30 marginr-30">
    <div class="borderr-5 paddingl-30 paddingr-30 colorb-gray paddingb-10">
      <header class="paddingt-10">
        <p id="version" class="colort-white"></p>
        <p class="paddingt-10 paddingb-10 colort-white">12/04/2019</p>
      </header>
      <div class="borderr-5 text-center paddingl-5 paddingr-5 paddingt-5 paddingb-5 colort-white">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus imperdiet, nulla et dictum interdum, nisi
          lorem egestas vitae scel<span id="dots">...</span><span id="more">erisque enim ligula venenatis dolor.
            Maecenas nisl est, ultrices nec congue eget, auctor vitae massa. Fusce luctus vestibulum augue ut aliquet.
            Nunc sagittis dictum nisi, sed ullamcorper ipsum dignissim ac. In at libero sed nunc venenatis imperdiet sed
            ornare turpis. Donec vitae dui eget tellus gravida venenatis. Integer fringilla congue eros non fermentum.
            Sed dapibus pulvinar nibh tempor porta.</span></p>
        <button onclick="showmore()" id="myBtn" class="btn-6">Read more</button>
      </div>
    </div>
    <div class="flex-center borderr-5 text-center margint-10 colorb-gray">
      <a href="#" class="add" onclick="ad()">
        <div class="card">
          <img src="https://image.flaticon.com/icons/png/512/28/28850.png" alt="" width="100" height="100">
          <h2 class="colort-white">m3u</h2>
        </div>
      </a>
      <a href="#" onclick="lists()">
        <div class="card">
          <img src="https://icon-library.net/images/website-icon-vector/website-icon-vector-8.jpg" alt="" width="100"
            height="100">
          <h2 class="colort-white">Main List</h2>
        </div>
      </a>
    </div>
  </div>
  <div id="notification" class="hidden">
    <p id="message"></p>
    <button id="close-button" onClick="closeNotification()">
      Close
    </button>
    <button id="restart-button" onClick="restartApp()" class="hidden">
      Restart
    </button>
  </div>
  <script>
    const { ipcRenderer } = require('electron');
    // ========== [ Execute Follow ] ========== //
    ipcRenderer.send('execute-follow');
    // ========== [ Update ] ========== //
    const lists = () => {
      ipcRenderer.send('internet-lists');
    }
    // ========== [ Another Functions ] ========== //
    const ad = () => {
      const x = document.querySelector('.add');
      x.innerHTML = `<div class="card"><img src="https://image.flaticon.com/icons/png/512/28/28850.png" alt="" width="100" height="100"><h2>Coming Soon</h2></div>`;
    }
    const showmore = () => {
      var dots = document.getElementById("dots");
      var moreText = document.getElementById("more");
      var btnText = document.getElementById("myBtn");

      if (dots.style.display === "none") {
        dots.style.display = "inline";
        btnText.innerHTML = "Read more";
        moreText.style.display = "none";
      } else {
        dots.style.display = "none";
        btnText.innerHTML = "Read less";
        moreText.style.display = "inline";
      }
    }
    // ========== [ Update ] ========== //
    const version = document.getElementById('version');
    const notification = document.getElementById('notification');
    const message = document.getElementById('message');
    const restartButton = document.getElementById('restart-button');

    ipcRenderer.send('app_version');
    ipcRenderer.on('app_version', (event, arg) => {
      ipcRenderer.removeAllListeners('app_version');
      version.innerText = 'Version ' + arg.version;
    });
    ipcRenderer.on('update_available', () => {
      ipcRenderer.removeAllListeners('update_available');
      message.innerText = 'A new update is available. Downloading now...';
      notification.classList.remove('hidden');
    });
    ipcRenderer.on('update_downloaded', () => {
      ipcRenderer.removeAllListeners('update_downloaded');
      message.innerText = 'Update Downloaded. It will be installed on restart. Restart now?';
      restartButton.classList.remove('hidden');
      notification.classList.remove('hidden');
    });
    function closeNotification() {
      notification.classList.add('hidden');
    }

    function restartApp() {
      ipcRenderer.send('restart_app');
    }
  </script>
</body>

</html>